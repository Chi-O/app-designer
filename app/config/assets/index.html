<!--Menu-->
<html>
    <head>
        <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0"/>
        <link href="css/index.css" type="text/css" rel="stylesheet" />
        <script type="text/javascript" src="libs/jquery.js"></script>
        <script type="text/javascript" src="../../system/js/odkCommon.js"></script>
        <script type="text/javascript" src="../../system/js/odkData.js"></script>
        <script type="text/javascript" src="../../system/tables/js/odkTables.js"></script>
        <script type="text/javascript">

        // Displays homescreen
        function display() {

            /*    Screen new client option that launches new client list view */
            var newClient = document.createElement("button");
            newClient.setAttribute("id", "button1");
            newClient.innerHTML = "Registration";
            newClient.onclick = function() {
                odkTables.launchHTML(
                    'config/assets/registration_start.html');
            }
            document.getElementById("wrapper").appendChild(newClient);    

            // Follow up with existing client option that launches
            // 'femaleClients' table list view
            var followUp = document.createElement("button");
            followUp.setAttribute("id", "button2");
            followUp.innerHTML = "Deliver to Beneficiary";
            followUp.onclick = function() {
                odkTables.launchHTML(
                    'config/assets/delivery_start.html');
            }
            document.getElementById("wrapper").appendChild(followUp);

            var voucher = document.createElement("button");
            voucher.setAttribute("id", "button3");
            voucher.innerHTML = "Redeem Voucher";
            voucher.onclick = function() {
                odkTables.launchHTML(
                    'config/assets/voucher_start.html');
            }
            document.getElementById("wrapper").appendChild(voucher);  

            // Send data option that luanches send finalized forms screen in
            // Collect
            var sendData = document.createElement("button");
            sendData.setAttribute("id", "button4");
            sendData.innerHTML = "Beneficiary List";
            sendData.onclick = function() {
              odkTables.launchHTML(
                  'config/assets/beneficiary_list_start.html');
            }
            document.getElementById("wrapper").appendChild(sendData);

            var search = document.createElement('button');
            search.setAttribute('id', 'button5');
            search.innerHTML = 'Beneficiary Search';
            search.onclick = function() {
                odkTables.launchHTML(
                    'config/assets/beneficiary_search.html');
            }
            document.getElementById('wrapper').appendChild(search);

            // Create a distribution Override if user is a tables superuser
            
            odkData.getRoles(rolesCBSuccess, rolesCBFailure);
        }

        function rolesCBSuccess(result) {
            var roles = result.getRoles();
            if ($.inArray('ROLE_SUPER_USER_TABLES', roles) > -1) {
                var override = document.createElement("button");
                override.setAttribute("id", "button6");
                override.innerHTML = "Administrator Overrides";
                override.onclick = function() {
                    odkTables.launchHTML(
                        'config/assets/overrides_start.html');
                }
                document.getElementById("wrapper").appendChild(override);
                }
        }

        function rolesCBFailure(error) {
            console.log('roles failed with error: ' + error);
        }
        
        </script>
    </head>

    <body onload="display();">
        <h1>Disaster Relief</h1>
        <div id="wrapper"></div>
        <p> <img src="img/small_2025.jpg"></p>
    </body>
</html>
