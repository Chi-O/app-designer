<!--Menu-->
<html>
    <head>
        <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0"/>
        <link href="css/index.css" type="text/css" rel="stylesheet" />
        <script type="text/javascript" src="libs/jquery.js"></script>
        <script type="text/javascript" src="../../system/js/odkCommon.js"></script>
        <script type="text/javascript" src="../../system/js/odkData.js"></script>
        <script type="text/javascript" src="../../system/tables/js/odkTables.js"></script>
        <script type="text/javascript">

        // Displays homescreen
        function display() {

            var newClient = document.createElement("button");
            newClient.innerHTML = "Registration";
            newClient.setAttribute("id", "register");
            newClient.onclick = function() {
                odkTables.launchHTML(
                    'config/assets/pre_registration.html');
            }
            document.getElementById("wrapper").appendChild(newClient);    


            var followUp = document.createElement("button");
            followUp.innerHTML = "Delivery";
            followUp.setAttribute("id", "deliver");
            followUp.onclick = function() {
                odkTables.launchHTML(
                    'config/assets/choose_method.html?title=' + encodeURIComponent('Choose Delivery Method') +
                    '&secondary_manual_title=' + encodeURIComponent('Please Enter Beneficiary Code')+ '&type=delivery');
            }
            document.getElementById("wrapper").appendChild(followUp);

            var viewData = document.createElement("button");
            viewData.innerHTML = "View Collected Data";
            viewData.setAttribute("id", "data");
            viewData.onclick = function() {
              odkTables.launchHTML(
                  'config/assets/data_start.html');
            }
            document.getElementById("wrapper").appendChild(viewData);

            // Create a distribution Override if user is a tables superuser            
            odkData.getRoles(rolesCBSuccess, rolesCBFailure);
        }

        function rolesCBSuccess(result) {
            var roles = result.getRoles();
            if ($.inArray('ROLE_SUPER_USER_TABLES', roles) > -1) {
                var override = document.createElement("button");
                override.innerHTML = "Administrator Overrides";
                override.setAttribute("id", "overrides");
                override.onclick = function() {
                    odkTables.launchHTML(
                        'config/assets/overrides_start.html');
                }
                document.getElementById("wrapper").appendChild(override);
            }
        }

        function rolesCBFailure(error) {
            console.log('roles failed with error: ' + error);
        }
        
        </script>
    </head>

    <body onload="display();">
        <div id="main">
            <h1>Disaster Relief</h1>
            <div id="wrapper"></div>
        </div>
        <div id="logo"><img src="img/small_2025.jpg"></div>
    </body>
</html>
